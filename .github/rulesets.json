{
  "rulesets": [
    {
      "name": "Require PR approval and passing CI",
      "target": "branch",
      "conditions": {
        "ref_name": ["main"]
      },
      "rules": [
        {
          "type": "pull_request",
          "parameters": {
            "require_approving_review_count": 1,
            "dismiss_stale_reviews_on_push": true,
            "require_code_owner_review": false,
            "require_last_push_approval": true,
            "required_review_thread_resolution": true
          }
        },
        {
          "type": "required_status_checks",
          "parameters": {
            "strict": true,
            "contexts": ["Lint & Format", "Build"]
          }
        },
        {
          "type": "non_fast_forward",
          "parameters": {}
        }
      ],
      "bypass_actors": [
        {
          "actor_id": 1,
          "actor_type": "RepositoryRole",
          "bypass_mode": "always"
        }
      ]
    }
  ]
}
